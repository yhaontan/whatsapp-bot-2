# WhatsApp Bot Advanced Multi-QR v3.0

בוט וואטסאפ מתקדם עם תמיכה ב-Multi-QR, מערכת Anti-Block חכמה, ניהול ערוצים מתקדם וסטטיסטיקות מקיפות.

## תכונות מתקדמות

### 🔥 מערכת Multi-QR מתקדמת
- ניהול עד 5 חשבונות וואטסאפ במקביל
- חלוקת עומס חכמה בין החשבונות
- התחברות אוטומטית מחדש בזמן תקלות
- מעקב בריאות חשבונות בזמן אמת

### 🛡️ מערכת Anti-Block חכמה
- **Load Balancing אינטליגנטי**: בחירה חכמה של החשבון הטוב ביותר לכל שליחה
- **השהיות אדפטיביות**: חישוב זמני השהיה דינמיים למניעת חסימות
- **מגבלות הודעות**: מעקב ושליטה במספר ההודעות לדקה/שעה/יום
- **קירור חשבונות**: מנוחה אוטומטית בין שימושים

### 📢 זיהוי ערוצים מתקדם
- זיהוי אוטומטי של כל סוגי הערוצים (Newsletter, Broadcast, וכו')
- תמיכה בשליחה לערוצים וקבוצות בנפרד
- בדיקת הרשאות שליחה לערוצים

### 🔄 מערכת כפילויות מתקדמת
- זיהוי כפילויות מדויק עם Hash מתקדם
- תמיכה בזיהוי כפילויות של מדיה ותוכן
- ניקוי אוטומטי של מטמון ישן

### 📊 סטטיסטיקות מקיפות
- מעקב ביצועים בזמן אמת
- סטטיסטיקות לפי חשבון ולפי קבוצה
- דוחות בריאות מערכת
- ניתוח שיעורי הצלחה

### 🎛️ ניהול מתקדם
- פקודות ניהול דרך קבוצת ניהול
- עדכון קונפיגורציה דינמי
- הפעלה מחדש של חשבונות בנפרד
- מערכת הרשאות מדורגת

## התקנה והפעלה

### דרישות מערכת
```bash
Node.js >= 16.0.0
npm >= 8.0.0
```

### התקנה
```bash
git clone https://github.com/yhaontan/whatsapp-bot-2.git
cd whatsapp-bot-2
npm install
```

### הפעלה
```bash
npm start
```

או ישירות:
```bash
node index.js
```

### בדיקת תכונות מתקדמות
```bash
node test_advanced_features.js
```

## קונפיגורציה

הקובץ `config.json` מכיל את כל ההגדרות:

### חשבונות Multi-QR
```json
{
  "QR_ACCOUNTS": [
    "main_account",
    "backup_account_1",
    "backup_account_2"
  ]
}
```

### מערכת Anti-Block
```json
{
  "ANTI_BLOCK_SYSTEM": {
    "ENABLED": true,
    "LOAD_BALANCING": "intelligent",
    "ACCOUNT_COOLDOWN": 120000,
    "MIN_DELAY_BETWEEN_SENDS": 3000,
    "MAX_DELAY_BETWEEN_SENDS": 12000,
    "MESSAGE_LIMITS": {
      "PER_MINUTE": 5,
      "PER_HOUR": 80,
      "PER_DAY": 800
    }
  }
}
```

### קבוצות וערוצים יעד
```json
{
  "TARGET_GROUP_NAMES": [
    "קבוצה 1",
    "קבוצה 2"
  ],
  "TARGET_CHANNELS": [
    "ערוץ חדשות",
    "ערוץ עדכונים"
  ]
}
```

## פקודות ניהול

### קבוצת ניהול
שלח הודעות לקבוצת הניהול לשליטה במערכת:

- `/stats` - סטטיסטיקות מערכת
- `/health` - דוח בריאות חשבונות
- `/config show` - הצג קונפיגורציה
- `/config reload` - טען קונפיג מחדש
- `/accounts list` - רשימת חשבונות
- `/accounts restart <id>` - הפעל חשבון מחדש

### הרשאות
- **Super Admins**: הרשאה מלאה לכל הפקודות
- **Regular Admins**: הרשאות ניהול בסיסיות
- **Authorized Senders**: הרשאה לשליחת הודעות

## מבנה תיקיות

המערכת יוצרת אוטומטית את התיקיות הנדרשות:

```
├── logs/           # קבצי לוג
├── temp/           # קבצים זמניים
├── backups/        # גיבויים
├── reports/        # דוחות
├── media/          # קבצי מדיה
├── sessions/       # סשנים של וואטסאפ
├── accounts/       # נתוני חשבונות
└── management/     # קבצי ניהול
```

## לוגים

מערכת הלוגים מתקדמת עם רמות שונות:

- **ERROR**: שגיאות קריטיות
- **WARN**: אזהרות
- **INFO**: מידע כללי
- **DEBUG**: מידע מפורט לפיתוח

לוגים נשמרים בקבצים ונכתבים גם לקונסול.

## אבטחה ומניעת חסימות

### מניעת חסימות
- השהיות רנדומליות בין הודעות
- חלוקת עומס בין חשבונות
- מעקב מגבלות שליחה
- זיהוי וטיפול בכשלים

### אבטחה
- מערכת הרשאות מדורגת
- הצפנת hash להודעות
- ולידציה של מקורות הודעות
- ניטור פעילות חשבונות

## פתרון בעיות

### שגיאת Chromium
```bash
# התקן Chromium
npm install puppeteer --no-optional

# או השתמש ב-Chrome מותקן
export PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
export PUPPETEER_EXECUTABLE_PATH=/usr/bin/google-chrome
```

### בעיות חיבור
- בדוק חיבור לאינטרנט
- וודא שוואטסאפ ווב עובד בדפדפן
- נקה תיקיית `.wwebjs_cache`

### בעיות ביצועים
- הקטן את מספר החשבונות הפעילים
- הגדל את זמני ההשהיה
- בדוק שימוש במעבד וזיכרון

## תרומה לפרויקט

1. Fork את הפרויקט
2. צור branch חדש למאפיין שלך
3. Commit את השינויים
4. Push ל-branch
5. צור Pull Request

## רישיון

MIT License - ראה קובץ LICENSE לפרטים.

## תמיכה

לתמיכה ושאלות:
- פתח Issue ב-GitHub
- שלח הודעה למפתחים

---

**גרסה**: Multi-QR-Advanced-v3.0  
**עודכן**: יולי 2025  
**מפתח**: yhaontan